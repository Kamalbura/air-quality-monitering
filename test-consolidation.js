const path = require('path');const fs = require('fs');const { PythonShell } = require('python-shell');// Set data pathconst dataPath = path.join(__dirname, 'data', 'air_quality_data.csv');// Ensure data existsif (!fs.existsSync(dataPath)) {  console.error(`ERROR: Data file not found at ${dataPath}`);  console.log('Generating sample data...');  try {    require('child_process').execSync('python python/sample_data.py', { stdio: 'inherit' });  } catch (err) {    console.error('Failed to generate sample data:', err.message);    process.exit(1);  }}// Main async function to handle the testing sequenceasync function runTests() {  let allTestsPassed = true;    console.log('Testing consolidated Python analysis...');    // Test basic analysis  console.log('\nTesting basic analysis...');  try {    const options = {      mode: 'json',      scriptPath: path.join(__dirname, 'python'),      args: [dataPath]    };        const basicResult = await PythonShell.run('analysis.py', options);        if (basicResult && basicResult.length > 0) {      const result = basicResult[0];      console.log('  Basic analysis successful:');      console.log(`  - Records processed: ${result.record_count}`);      console.log(`  - Average PM2.5: ${result.average_pm25}`);      console.log(`  - Average PM10: ${result.average_pm10}`);    } else {      console.error('ERROR: Basic analysis failed to return results');      allTestsPassed = false;    }  } catch (err) {    console.error('ERROR: Failed to run basic analysis:', err);    allTestsPassed = false;  }  // Test extended analysis  console.log('\nTesting extended analysis...');  try {    const options = {      mode: 'json',      scriptPath: path.join(__dirname, 'python'),      args: [dataPath, '', '', '--extended']    };        const extendedResult = await PythonShell.run('analysis.py', options);        if (extendedResult && extendedResult.length > 0) {      const result = extendedResult[0];      console.log('  Extended analysis successful:');      console.log(`  - Records processed: ${result.record_count}`);      console.log(`  - Has correlations: ${result.correlations ? 'Yes' : 'No'}`);      console.log(`  - Has hourly patterns: ${result.hourly_patterns ? 'Yes' : 'No'}`);      console.log(`  - Has daily patterns: ${result.daily_patterns ? 'Yes' : 'No'}`);      console.log(`  - Has data quality: ${result.data_quality ? 'Yes' : 'No'}`);    } else {      console.error('ERROR: Extended analysis failed to return results');      allTestsPassed = false;    }  } catch (err) {    console.error('ERROR: Failed to run extended analysis:', err);    allTestsPassed = false;  }  if (allTestsPassed) {    console.log('\n✅ All tests PASSED');  } else {    console.error('\n❌ Some tests FAILED');  }}// Run the testsrunTests().catch(console.error);